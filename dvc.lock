schema: '2.0'
stages:
  preprocess_data:
    cmd: mkdir -p ./data/preprocessed && mkdir -p ./data/eval_data && uv run
      preprocess_data
    deps:
    - path: data/raw/
      hash: md5
      md5: 597e2081eed0564410fa7026d1a88cef.dir
      size: 370538830
      nfiles: 7
    - path: src/opinionlens/preprocessing/clean.py
      hash: md5
      md5: 6c3c121a895a63672af8e0f685d9fc19
      size: 272
    - path: src/opinionlens/preprocessing/eval.py
      hash: md5
      md5: 03d1123c91d7ed819e58ce42e6da08e4
      size: 1476
    - path: src/opinionlens/preprocessing/scripts/preprocess_data.py
      hash: md5
      md5: 77daf060b332a638f35bef696b10342b
      size: 3398
    - path: src/opinionlens/preprocessing/tokenize.py
      hash: md5
      md5: fce993fc09013a0e45c08fa7bcc710ec
      size: 245
    params:
      params.yaml:
        preprocessing.data_splits:
        - 0.8
        - 0.1
        - 0.1
    outs:
    - path: data/eval_data/
      hash: md5
      md5: b37cffcd18ce53d1b2e782249738cf8f.dir
      size: 73390611
      nfiles: 5
    - path: data/preprocessed/
      hash: md5
      md5: a2858e0005792414aa1e0b1a769753a8.dir
      size: 301744372
      nfiles: 9
  vectorize_data:
    cmd: mkdir -p ./data/vectorized && uv run vectorize_data
    deps:
    - path: data/eval_data/
      hash: md5
      md5: b37cffcd18ce53d1b2e782249738cf8f.dir
      size: 73390611
      nfiles: 5
    - path: data/preprocessed/
      hash: md5
      md5: a2858e0005792414aa1e0b1a769753a8.dir
      size: 301744372
      nfiles: 9
    - path: src/opinionlens/preprocessing/scripts/vectorize_data.py
      hash: md5
      md5: e95728da903fbd5aa99f023fd79d055b
      size: 1788
    - path: src/opinionlens/preprocessing/vectorize.py
      hash: md5
      md5: 4717282105da1a10c51a0ad454ef6a29
      size: 942
    outs:
    - path: data/vectorized/
      hash: md5
      md5: a4289e82652a663c664f3165fdd974dc.dir
      size: 456119836
      nfiles: 6
    - path: objects/vectorizer.pkl
      hash: md5
      md5: 16174b6ae4a99fb3d7a5a65ed29e6ceb
      size: 4137379
  run_baselines:
    cmd: uv run baselines
    deps:
    - path: data/preprocessed/
      hash: md5
      md5: e273f67071cf73efb3840c23b5036965.dir
      size: 300513170
      nfiles: 6
  train_sklearn:
    cmd: uv run train_sklearn
    deps:
    - path: data/vectorized/
      hash: md5
      md5: a4289e82652a663c664f3165fdd974dc.dir
      size: 456119836
      nfiles: 6
  tune_sklearn:
    cmd: uv run tune_sklearn
    deps:
    - path: data/vectorized/
      hash: md5
      md5: a4289e82652a663c664f3165fdd974dc.dir
      size: 456119836
      nfiles: 6
  run_evals:
    cmd: uv run evals
    deps:
    - path: data/eval_data/
      hash: md5
      md5: b37cffcd18ce53d1b2e782249738cf8f.dir
      size: 73390611
      nfiles: 5
    params:
      params.yaml:
        models.model_id: m-0a2c9e911577444586c81c7265f6ab7a
